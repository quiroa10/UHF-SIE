<UserControl x:Class="UHF_Desk.InquiryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:local="clr-namespace:UHF_Desk"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="1000"
             DataContext="{Binding Source={StaticResource locator},Path=InquiryViewModel}">
    <UserControl.Resources>
        <ResourceDictionary>
            <Style x:Key="CenterAlignmentStyle" TargetType="TextBlock">
                <Setter Property="TextAlignment" Value="Center"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="TextWrapping" Value="Wrap"/>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="60"/>
                <RowDefinition Height="auto"/>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Border>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Left" Orientation="Horizontal">
                        <Button HorizontalAlignment="Right" Height="30" Width="120" Style="{StaticResource NormalButtonStyle}" Command="{Binding MonitorCommand}" Margin="5,0" Cursor="Hand">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding ButtonIcon}" FontFamily="{StaticResource Iconfont}" VerticalAlignment="Center" Margin="3,0"/>
                                <TextBlock Text="{Binding ButtonText}" VerticalAlignment="Center" Margin="3,0"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <StackPanel Grid.Column="1"  Orientation="Horizontal" HorizontalAlignment="Right" Margin="10,0">
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                            <TextBlock Text="{Binding TotalCount}" FontSize="50" Margin="10,0" Foreground="#4682B4" FontWeight="Bold"/>
                            <TextBlock Text="{DynamicResource TAGS}" VerticalAlignment="Bottom" Foreground="Gray"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                            <TextBlock Text="{Binding CumulativeBack}" FontSize="50" Margin="10,0" Foreground="#4682B4" FontWeight="Bold"/>
                            <TextBlock Text="{DynamicResource READS}" VerticalAlignment="Bottom" Foreground="Gray"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="0,0,20,0">
                            <TextBlock Text="{Binding RecognitionSpeed}" FontSize="50" Margin="10,0" Foreground="#4682B4" FontWeight="Bold"/>
                            <TextBlock Text="{DynamicResource SPEEDS}" VerticalAlignment="Bottom" Foreground="Gray"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </Border>

            <Border Grid.Row="1" BorderThickness="1" BorderBrush="#ccc" Background="#5fff" CornerRadius="5" Margin="5">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="-4" BlurRadius="5" Color="#f5f5f5"/>
                </Border.Effect>
                <Expander Header="{DynamicResource InquirySetting}" IsExpanded="True">
                    <Grid Margin="5,5,50,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto"/>
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Border BorderBrush="#eee" BorderThickness="0,0,1,0"/>
                        <StackPanel Margin="0,0,10,0" IsEnabled="{Binding IsMonitor,Converter={StaticResource ObjectConverter},ConverterParameter=false:true:false:0}">
                            <TextBlock Margin="5">
                            <Run Text="{DynamicResource StartReadingOptions}" FontWeight="Bold" Foreground="#4682B4"/>
                            </TextBlock>
                            <Border BorderBrush="#ccc" BorderThickness="0,1,0,0" Margin="5,0"/>
                            <Border BorderBrush="#4682B4" BorderThickness="0,1,0,0" Width="20" HorizontalAlignment="Left" Margin="10,0"/>
                            <Grid Margin="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource StartReading}" Foreground="#4682B4"/>
                                <StackPanel Grid.Column="1">
                                    <RadioButton Content="{DynamicResource Start1}" Margin="5" IsChecked="{Binding Config.IsAnswer}"/>
                                    <RadioButton Margin="5" Content="{DynamicResource Start3}" IsChecked="{Binding Config.IsAnto}"/>
                                </StackPanel>
                            </Grid>
                            <TextBlock Margin="5">
                            <Run Text="{DynamicResource StopReadingOptions}" FontWeight="Bold" Foreground="#4682B4"/>
                            </TextBlock>
                            <Border BorderBrush="#ccc" BorderThickness="0,1,0,0" Margin="5,0"/>
                            <Border BorderBrush="#4682B4" BorderThickness="0,1,0,0" Width="20" HorizontalAlignment="Left" Margin="10,0"/>
                            <Grid Margin="5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="200"/>
                                    <ColumnDefinition Width="25"/>
                                    <ColumnDefinition/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="{DynamicResource StopReading}" Foreground="#4682B4"/>
                                <StackPanel Grid.Column="1">
                                    <RadioButton VerticalAlignment="Center" IsChecked="{Binding Config.IsAnswerStop1}" Margin="5"
                                             IsEnabled="{Binding Config.IsAnswer,Converter={StaticResource ObjectConverter},ConverterParameter=true:true:false:0}"/>
                                    <RadioButton VerticalAlignment="Center" IsChecked="{Binding Config.IsAnswerStop2}" Margin="5,12"
                                             IsEnabled="{Binding Config.IsAnswer,Converter={StaticResource ObjectConverter},ConverterParameter=true:true:false:0}"/>
                                    <RadioButton VerticalAlignment="Center" Margin="5" IsChecked="{Binding Config.IsAntoStop}"
                                             IsEnabled="{Binding Config.IsAnto,Converter={StaticResource ObjectConverter},ConverterParameter=true:true:false:0}"/>
                                </StackPanel>
                                <StackPanel Grid.Column="2">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{DynamicResource Stop1}" VerticalAlignment="Center"/>
                                        <TextBlock Text=" , " VerticalAlignment="Center"/>
                                        <TextBox Width="50" Style="{StaticResource BaseTextBoxStyle}" Margin="5,0" Text="{Binding Config.MS}"
                                             IsEnabled="{Binding Config.IsAnswer,Converter={StaticResource ObjectConverter},ConverterParameter=true:true:false:0}"/>
                                        <TextBlock Text="{DynamicResource s}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <StackPanel Orientation="Horizontal" Margin="0,5">
                                        <TextBlock Text="{DynamicResource Stop1}" VerticalAlignment="Center"/>
                                        <TextBlock Text=" , " VerticalAlignment="Center"/>
                                        <TextBox Width="50" Style="{StaticResource BaseTextBoxStyle}" Margin="5,0" Text="{Binding Config.InventoryRounds}"
                                             IsEnabled="{Binding Config.IsAnswer,Converter={StaticResource ObjectConverter},ConverterParameter=true:true:false:0}"/>
                                        <TextBlock Text="{DynamicResource Stop3}" VerticalAlignment="Center"/>
                                    </StackPanel>
                                    <TextBlock Text="--" VerticalAlignment="Center" Margin="0,5"/>
                                </StackPanel>
                            </Grid>
                        </StackPanel>

                        <Grid Grid.Column="1" Margin="5,0" IsEnabled="{Binding IsMonitor,Converter={StaticResource ObjectConverter},ConverterParameter=false:true:false:0}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="auto"/>
                                <RowDefinition Height="35"/>
                                <RowDefinition Height="35"/>
                                <RowDefinition Height="35"/>
                                <RowDefinition/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <GroupBox Header="{DynamicResource InquireArea}" Grid.ColumnSpan="4">
                                <ItemsControl ItemsSource="{Binding Areas}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="3"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <CheckBox Content="{Binding Area}" IsChecked="{Binding IsChecked}" Margin="5" HorizontalAlignment="Center"
                                                  Command="{Binding DataContext.AreaChangedCommand,RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </GroupBox>
                            <TextBlock Text="{DynamicResource IntenelTime}" VerticalAlignment="Center" Margin="5,0" Grid.Row="1"/>
                            <TextBox Text="{Binding Config.IntenelTime,UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource BaseTextBoxStyle}" Margin="5,0" Height="30" Grid.Row="1" Grid.Column="1"/>
                            <TextBlock Text="{DynamicResource FilterTime}" VerticalAlignment="Center" Margin="5,0" Grid.Row="1" Grid.Column="2"/>
                            <TextBox Text="{Binding Config.Filtertime,UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource BaseTextBoxStyle}" Margin="5,0" Height="30" Grid.Row="1" Grid.Column="3"/>

                            <TextBlock Text="{DynamicResource StartAddr}" VerticalAlignment="Center" Margin="5,0"  Grid.Row="2"/>
                            <TextBox Text="{Binding Config.Startaddr}" Style="{StaticResource BaseTextBoxStyle}" Margin="5,0" Height="30" Grid.Row="2" Grid.Column="1"/>
                            <TextBlock Text="{DynamicResource ByteLen}" VerticalAlignment="Center" Margin="5,0"  Grid.Row="2" Grid.Column="2"/>
                            <TextBox Text="{Binding Config.DataLen}" Style="{StaticResource BaseTextBoxStyle}" Margin="5,0" Height="30" Grid.Row="2" Grid.Column="3"/>
                            
                            <TextBlock Text="{DynamicResource QValue}" VerticalAlignment="Center" Margin="5,0" Grid.Row="3"/>
                            <ComboBox SelectedValue="{Binding Config.Q}" Style="{StaticResource PropComboBoxStyle}" Height="30" Margin="5,0" Grid.Row="3" Grid.Column="1">
                                <ComboBox.ItemsSource>
                                    <x:Array Type="sys:String">
                                        <sys:String>0</sys:String>
                                        <sys:String>1</sys:String>
                                        <sys:String>2</sys:String>
                                        <sys:String>3</sys:String>
                                        <sys:String>4</sys:String>
                                        <sys:String>5</sys:String>
                                        <sys:String>6</sys:String>
                                        <sys:String>7</sys:String>
                                        <sys:String>8</sys:String>
                                        <sys:String>9</sys:String>
                                        <sys:String>10</sys:String>
                                        <sys:String>11</sys:String>
                                        <sys:String>12</sys:String>
                                        <sys:String>13</sys:String>
                                        <sys:String>14</sys:String>
                                        <sys:String>15</sys:String>
                                    </x:Array>
                                </ComboBox.ItemsSource>
                            </ComboBox>
                            <TextBlock Text="{DynamicResource Session}" VerticalAlignment="Center" Margin="5,0" Grid.Row="3" Grid.Column="2"/>
                            <ComboBox SelectedValue="{Binding Config.Session}" SelectedIndex="{Binding Config.SessionIndex}" Style="{StaticResource PropComboBoxStyle}" Margin="5,0"
                                  Height="30" Grid.Row="3" Grid.Column="3">
                                <ComboBox.ItemsSource>
                                    <x:Array Type="sys:String">
                                        <sys:String>S0</sys:String>
                                        <sys:String>S1</sys:String>
                                        <sys:String>S2</sys:String>
                                        <sys:String>S3</sys:String>
                                        <sys:String>Auto</sys:String>
                                    </x:Array>
                                </ComboBox.ItemsSource>
                            </ComboBox>
                        </Grid>

                        <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="5" VerticalAlignment="Bottom" HorizontalAlignment="Right"
                                IsEnabled="{Binding IsMonitor,Converter={StaticResource ObjectConverter},ConverterParameter=false:true:false:0}">
                            <Button Content="{DynamicResource Getting}" Height="30" Width="100" Style="{StaticResource NormalButtonStyle}" Command="{Binding GetCommand}" Margin="5,0" Cursor="Hand"/>
                            <Button Content="{DynamicResource Setting}" Height="30" Width="100" Style="{StaticResource NormalButtonStyle}" Command="{Binding SetCommand}" Margin="5,0" Cursor="Hand"/>
                        </StackPanel>
                    </Grid>
                </Expander>
            </Border>

            <DataGrid Grid.Row="2" Background="Transparent" BorderThickness="0" ItemsSource="{Binding MonitorDtl}" CanUserSortColumns="True" Margin="5">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Header="{DynamicResource Code}" Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition/>
                                        <ColumnDefinition Width="30"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="auto"/>
                                    </Grid.RowDefinitions>
                                    <TextBlock Text="{Binding Code}" TextWrapping="Wrap" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    <Button Style="{StaticResource ControlButtonStyle}" Content="&#xe8ac;" FontFamily="{StaticResource Iconfont}" Tag="5" Margin="5,0" Foreground="#4682B4" Cursor="Hand" Grid.Column="1"
                                            Command="{Binding DataContext.ShowCodeViewCommand,RelativeSource={RelativeSource AncestorType=UserControl}}" CommandParameter="{Binding}"
                                            Visibility="{Binding AreaIndex,Converter={StaticResource ObjectConverter},ConverterParameter=1:Visible:Collapsed:1}"/>
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="{DynamicResource DataLen}" Width="160" Binding="{Binding DataLen}"  ElementStyle="{StaticResource CenterAlignmentStyle}"/>
                    <DataGridTextColumn Header="{DynamicResource Count}" Width="160" Binding="{Binding Ant1}"  ElementStyle="{StaticResource CenterAlignmentStyle}"/>
                    <DataGridTextColumn Header="{DynamicResource RSSI}" Width="160" Binding="{Binding RSSI}"  ElementStyle="{StaticResource CenterAlignmentStyle}"/>
                    <DataGridTextColumn Header="{DynamicResource Channel}" Width="160" Binding="{Binding Channel}"  ElementStyle="{StaticResource CenterAlignmentStyle}"/>
                </DataGrid.Columns>
            </DataGrid>
        </Grid>
    </Grid>
</UserControl>
